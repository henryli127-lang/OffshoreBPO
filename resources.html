<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Resources & Insights - Company Logo</title>
	<meta name="description" content="Strategic guides and white papers to help global companies hire and build teams in China—without setting up a local entity.">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<!-- Navigation -->
	<nav class="navbar">
		<div class="nav-container">
			<div class="logo"><a href="index.html"><img src="company-logo.png" alt="Company Logo" /></a></div>
			<button class="menu-toggle" aria-label="Toggle menu">
				<span></span>
				<span></span>
				<span></span>
			</button>
			<div class="menu-overlay"></div>
			<ul class="nav-links">
				<li><a href="index.html">Home</a></li>
				<li class="dropdown">
					<a href="#solutions" class="dropdown-toggle">Solutions <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 4.5l3 3 3-3"/></svg></a>
					<ul class="dropdown-menu">
						<li><a href="solution-1.html">BPO & EOR for tech and professional services</a></li>
						<li><a href="solution-2.html">Sales and service team‑as‑a‑service for export manufacturers and hardware companies</a></li>
						<li><a href="solution-3.html">EOR & HR outsourcing for companies and organizations without a China entity</a></li>
					</ul>
				</li>
				<li><a href="why-us.html">Why Us</a></li>
				<li><a href="resources.html">Resources</a></li>
				<li><a href="#" class="btn-nav" id="contact-btn-nav">Contact</a></li>
			</ul>
		</div>
	</nav>

	<!-- Hero Carousel -->
	<section class="resources-hero-carousel" aria-label="Featured resources carousel">
		<div class="carousel-container">
			<div class="carousel-wrapper">
				<div class="carousel-slides">
					<!-- Slide 1: EOR vs PEO -->
					<div class="carousel-slide active" data-slide="0">
						<div class="carousel-slide-bg" style="background-image: url('china-hr-eor-peo-hero.png');"></div>
						<div class="carousel-overlay"></div>
						<div class="container">
							<div class="carousel-content">
								<div class="carousel-text">
									<div class="resource-label">WHITE PAPER · CHINA TALENT & COMPLIANCE</div>
									<h1>Navigating China's Talent Market: A Strategic Guide to EOR vs. PEO</h1>
									<p class="carousel-subtitle">Understand when to use EOR, PEO, or contractors so you can hire in China compliantly—without setting up a local entity.</p>
									<ul class="carousel-bullets">
										<li>
											<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<polyline points="20 6 9 17 4 12"></polyline>
											</svg>
											<span>Clear decision framework for EOR vs. PEO</span>
										</li>
										<li>
											<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<polyline points="20 6 9 17 4 12"></polyline>
											</svg>
											<span>Compliance, cost, and speed implications of each model</span>
										</li>
										<li>
											<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<polyline points="20 6 9 17 4 12"></polyline>
											</svg>
											<span>Practical scenarios for global HR, finance, and founders</span>
										</li>
									</ul>
									<div class="carousel-meta">White paper · For global HR, CFOs, and founders · ~15–20 min read</div>
									<div class="carousel-cta">
										<a href="#" class="btn btn-primary download-trigger" data-resource="eor-vs-peo-guide">Download full guide</a>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Slide 2: Building China Team -->
					<div class="carousel-slide" data-slide="1">
						<div class="carousel-slide-bg" style="background-image: url('china-team-sme-hero.png');"></div>
						<div class="carousel-overlay"></div>
						<div class="container">
							<div class="carousel-content">
								<div class="carousel-text">
									<div class="resource-label">STRATEGIC GUIDE · BUILDING CHINA TEAMS</div>
									<h1 class="carousel-h1">Building Your China Team: A Strategic Guide for SMEs</h1>
									<p class="carousel-subtitle">A step‑by‑step roadmap for small and mid‑sized companies to hire, manage, and scale their first team in China.</p>
									<ul class="carousel-bullets">
										<li>
											<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<polyline points="20 6 9 17 4 12"></polyline>
											</svg>
											<span>How to design your first roles and hiring roadmap</span>
										</li>
										<li>
											<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<polyline points="20 6 9 17 4 12"></polyline>
											</svg>
											<span>Managing culture, performance, and retention across borders</span>
										</li>
										<li>
											<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
												<polyline points="20 6 9 17 4 12"></polyline>
											</svg>
											<span>Using BPO and EOR to scale before a legal entity</span>
										</li>
									</ul>
									<div class="carousel-meta">Strategic guide · For SME founders and regional leaders · ~20 min read</div>
									<div class="carousel-cta">
										<a href="#" class="btn btn-primary download-trigger" data-resource="china-team-guide">Download full guide</a>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Carousel Controls -->
				<button class="carousel-arrow carousel-arrow-prev" aria-label="Previous slide">
					<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<polyline points="15 18 9 12 15 6"></polyline>
					</svg>
				</button>
				<button class="carousel-arrow carousel-arrow-next" aria-label="Next slide">
					<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
						<polyline points="9 18 15 12 9 6"></polyline>
					</svg>
				</button>

				<!-- Carousel Indicators -->
				<div class="carousel-indicators">
					<button class="carousel-indicator active" data-slide="0" aria-label="Go to slide 1"></button>
					<button class="carousel-indicator" data-slide="1" aria-label="Go to slide 2"></button>
				</div>
			</div>
		</div>
	</section>

	<!-- Featured Resources -->
	<section class="section">
		<div class="container">
			<div class="section-header">
				<h2 id="featured-resources">Featured insights</h2>
				<p>Our latest strategic guides to help global companies hire and build teams in China—without setting up a local entity.</p>
			</div>
			<div class="resources-grid two-col">
				<!-- Resource Card 1 -->
				<article class="resource-card">
					<div class="resource-card-label">White Paper</div>
					<h3>Navigating China's Talent Market: EOR vs. PEO</h3>
					<p>Compare EOR, PEO, and contractor models for China, and choose the right approach for compliant, scalable hiring.</p>
					<div class="resource-meta">China talent · Compliance · ~15–20 min</div>
					<a href="#" class="btn btn-primary download-trigger" data-resource="eor-vs-peo-guide">Download white paper</a>
				</article>

				<!-- Resource Card 2 -->
				<article class="resource-card">
					<div class="resource-card-label">Strategic Guide</div>
					<h3>Building Your China Team: A Guide for SMEs</h3>
					<p>A practical roadmap for SMEs to design roles, hire, and manage a local team in China before setting up a legal entity.</p>
					<div class="resource-meta">China teams · SMEs · ~20 min</div>
									<a href="#" class="btn btn-primary download-trigger" data-resource="china-team-guide">Download guide</a>
				</article>
			</div>
		</div>
	</section>

	<!-- All Resources -->
	<section class="section section-alt">
		<div class="container">
			<div class="section-header">
				<h2 id="all-resources">All resources</h2>
			</div>
			
			<!-- Filter Bar (non-functional for now) -->
			<div class="resources-filter-bar">
				<div class="filter-group">
					<label for="topic-filter" class="sr-only">Filter by topic</label>
					<select id="topic-filter" class="filter-select" disabled>
						<option>Topic</option>
						<option>China talent</option>
						<option>China teams</option>
					</select>
				</div>
				<div class="filter-group">
					<label for="type-filter" class="sr-only">Filter by type</label>
					<select id="type-filter" class="filter-select" disabled>
						<option>Type</option>
						<option>White paper</option>
						<option>Strategic guide</option>
						<option>Case study</option>
					</select>
				</div>
			</div>

			<!-- Resources List -->
			<div class="resources-list">
				<article class="resource-list-item">
					<div class="resource-list-content">
						<h3><a href="eor-vs-peo.html">Navigating China's Talent Market: A Strategic Guide to EOR vs. PEO</a></h3>
						<div class="resource-badges">
							<span class="resource-badge badge-type">White Paper</span>
							<span class="resource-badge badge-topic">China talent</span>
						</div>
						<p>Understand when to use EOR, PEO, or contractors so you can hire in China compliantly—without setting up a local entity.</p>
					</div>
					<div class="resource-list-action">
						<a href="#" class="resource-download-link download-trigger" data-resource="eor-vs-peo-guide">Download</a>
					</div>
				</article>

				<article class="resource-list-item">
					<div class="resource-list-content">
						<h3><a href="#">Building Your China Team: A Strategic Guide for SMEs</a></h3>
						<div class="resource-badges">
							<span class="resource-badge badge-type">Strategic Guide</span>
							<span class="resource-badge badge-topic">China teams</span>
						</div>
						<p>A step‑by‑step roadmap for small and mid‑sized companies to hire, manage, and scale their first team in China.</p>
					</div>
					<div class="resource-list-action">
						<a href="#" class="resource-download-link download-trigger" data-resource="china-team-guide">Download</a>
					</div>
				</article>
			</div>
		</div>
	</section>

	<!-- Download Modal -->
	<div id="download-modal" class="modal">
		<div class="modal-content">
			<span class="modal-close download-modal-close">&times;</span>
			<h2 class="modal-title" id="download-modal-title">Get the PDF by email</h2>
			<p class="modal-subtitle">
				Enter your name and email, and we'll send the PDF straight to your inbox (and give you a direct download link on this page).
			</p>
			<form id="download-form">
				<input type="hidden" id="download-resource" name="resource" value="">
				<div class="form-group">
					<label for="download-name">Name *</label>
					<input type="text" id="download-name" name="name" required>
					<span class="form-error" id="download-name-error"></span>
				</div>
				<div class="form-group">
					<label for="download-email">Email *</label>
					<input type="email" id="download-email" name="email" required>
					<span class="form-error" id="download-email-error"></span>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary" id="download-submit-btn">Send me the PDF</button>
					<button type="button" class="btn btn-outline download-modal-cancel">Cancel</button>
				</div>
				<div id="download-error-message" class="download-error-message" style="display: none;">
					<p>Something went wrong. Please try again or email us at info@emiliateams.com.</p>
				</div>
			</form>
			<div id="download-success" class="download-success" hidden>
				<div class="success-icon">✓</div>
				<h3>Check your email</h3>
				<p class="success-message">
					We've sent the PDF to <span id="download-success-email"></span>.
					You can also download it directly below.
				</p>
				<a id="download-direct-link" href="#" class="btn btn-primary" download>
					Download now
				</a>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<footer class="footer">
		<div class="container">
			<div class="footer-grid">
				<div class="footer-brand">
					<div class="footer-logo"><img src="company-logo.png" alt="Company Logo" /></div>
					<p>Building your China team with expertise, compliance, and care.</p>
				</div>
				<div class="footer-links">
					<h4>Solutions</h4>
					<a href="solution-1.html">BPO Services</a>
					<a href="solution-3.html">EOR / PEO</a>
					<a href="solution-2.html">Sales Execution</a>
				</div>
				<div class="footer-links">
					<h4>Company</h4>
					<a href="why-us.html">Why Us</a>
					<a href="resources.html">Resources</a>
					<a href="consultation.html">Book a Consultation</a>
				</div>
				<div class="footer-links">
					<h4>Get Started</h4>
					<a href="consultation.html">Book a Call</a>
					<a href="#" class="download-trigger" data-resource="service-overview">Download Overview</a>
				</div>
			</div>
			<div class="footer-bottom">
				<p>© 2024 Company Logo. All rights reserved.</p>
			</div>
		</div>
	</footer>

	<!-- Consultation Modal (reused from index.html) -->
	<div id="consultation-modal" class="modal">
		<div class="modal-content">
			<span class="modal-close">&times;</span>
			<h2 id="modal-title">Contact Us</h2>
			<form id="consultation-form">
				<div class="form-group">
					<label for="name">Name *</label>
					<input type="text" id="name" name="name" required>
				</div>
				<div class="form-group">
					<label for="email">Work Email *</label>
					<input type="email" id="email" name="email" required>
				</div>
				<div class="form-group">
					<label for="phone">Phone Number *</label>
					<input type="tel" id="phone" name="phone" required>
				</div>
				<div class="form-group">
					<label for="country">Which country are you located in? *</label>
					<select id="country" name="country" required>
						<option value="">Please select</option>
						<option value="US">United States</option>
						<option value="CA">Canada</option>
						<option value="GB">United Kingdom</option>
						<option value="AU">Australia</option>
						<option value="DE">Germany</option>
						<option value="FR">France</option>
						<option value="IT">Italy</option>
						<option value="ES">Spain</option>
						<option value="NL">Netherlands</option>
						<option value="BE">Belgium</option>
						<option value="CH">Switzerland</option>
						<option value="AT">Austria</option>
						<option value="SE">Sweden</option>
						<option value="NO">Norway</option>
						<option value="DK">Denmark</option>
						<option value="FI">Finland</option>
						<option value="IE">Ireland</option>
						<option value="NZ">New Zealand</option>
						<option value="SG">Singapore</option>
						<option value="HK">Hong Kong</option>
						<option value="JP">Japan</option>
						<option value="KR">South Korea</option>
						<option value="Other">Other</option>
					</select>
				</div>
				<div class="form-group">
					<label for="employees">How many employees are you planning to hire? *</label>
					<select id="employees" name="employees" required>
						<option value="">Please select</option>
						<option value="1-5">1-5 employees</option>
						<option value="6-10">6-10 employees</option>
						<option value="11-20">11-20 employees</option>
						<option value="21-50">21-50 employees</option>
						<option value="51-100">51-100 employees</option>
						<option value="100+">100+ employees</option>
					</select>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary" id="form-submit-btn">Submit</button>
					<button type="button" class="btn btn-outline modal-cancel">Cancel</button>
				</div>
			</form>
			<div id="consultation-success" class="consultation-success" style="display: none;">
				<div class="success-icon">✓</div>
				<h3>Thank you!</h3>
				<p>Someone from our team will contact you within 24 hours.</p>
			</div>
		</div>
	</div>

	<script>
		// Navbar scroll effect
		const navbar = document.querySelector('.navbar');
		window.addEventListener('scroll', () => {
			if (window.scrollY > 50) {
				navbar.classList.add('scrolled');
			} else {
				navbar.classList.remove('scrolled');
			}
		});

		// Mobile menu toggle
		const menuToggle = document.querySelector('.menu-toggle');
		const navLinks = document.querySelector('.nav-links');
		const menuOverlay = document.querySelector('.menu-overlay');

		if (menuToggle) {
			menuToggle.addEventListener('click', () => {
				navLinks.classList.toggle('active');
				menuOverlay.classList.toggle('active');
				menuToggle.classList.toggle('active');
				document.body.style.overflow = navLinks.classList.contains('active') ? 'hidden' : '';
			});
		}

		if (menuOverlay) {
			menuOverlay.addEventListener('click', () => {
				navLinks.classList.remove('active');
				menuOverlay.classList.remove('active');
				menuToggle.classList.remove('active');
				document.body.style.overflow = '';
			});
		}

		// Carousel functionality
		const carouselSlides = document.querySelectorAll('.carousel-slide');
		const carouselIndicators = document.querySelectorAll('.carousel-indicator');
		const prevArrow = document.querySelector('.carousel-arrow-prev');
		const nextArrow = document.querySelector('.carousel-arrow-next');
		let currentSlide = 0;
		let autoRotateInterval;

		function showSlide(index) {
			// Remove active class from all slides and indicators
			carouselSlides.forEach(slide => slide.classList.remove('active'));
			carouselIndicators.forEach(indicator => indicator.classList.remove('active'));

			// Add active class to current slide and indicator
			carouselSlides[index].classList.add('active');
			if (carouselIndicators[index]) {
				carouselIndicators[index].classList.add('active');
			}

			currentSlide = index;
		}

		function nextSlide() {
			const next = (currentSlide + 1) % carouselSlides.length;
			showSlide(next);
			resetAutoRotate();
		}

		function prevSlide() {
			const prev = (currentSlide - 1 + carouselSlides.length) % carouselSlides.length;
			showSlide(prev);
			resetAutoRotate();
		}

		function startAutoRotate() {
			autoRotateInterval = setInterval(nextSlide, 7000);
		}

		function stopAutoRotate() {
			if (autoRotateInterval) {
				clearInterval(autoRotateInterval);
			}
		}

		function resetAutoRotate() {
			stopAutoRotate();
			startAutoRotate();
		}

		// Event listeners
		if (nextArrow) {
			nextArrow.addEventListener('click', nextSlide);
		}

		if (prevArrow) {
			prevArrow.addEventListener('click', prevSlide);
		}

		carouselIndicators.forEach((indicator, index) => {
			indicator.addEventListener('click', () => {
				showSlide(index);
				resetAutoRotate();
			});
		});

		// Pause on hover
		const carouselWrapper = document.querySelector('.carousel-wrapper');
		if (carouselWrapper) {
			carouselWrapper.addEventListener('mouseenter', stopAutoRotate);
			carouselWrapper.addEventListener('mouseleave', startAutoRotate);
		}

		// Start auto-rotate
		startAutoRotate();

		// Keyboard navigation
		document.addEventListener('keydown', (e) => {
			if (e.key === 'ArrowLeft') prevSlide();
			if (e.key === 'ArrowRight') nextSlide();
		});

		// Consultation Modal (reused from index.html)
		const consultationModal = document.getElementById('consultation-modal');
		const consultationForm = document.getElementById('consultation-form');
		const consultationSuccess = document.getElementById('consultation-success');
		const modalTitle = document.getElementById('modal-title');
		const modalClose = document.querySelector('.modal-close');
		const modalCancel = document.querySelector('.modal-cancel');
		const contactBtns = document.querySelectorAll('#contact-btn-nav, #contact-btn-footer');

		const openModal = (title) => {
			modalTitle.textContent = title;
			consultationModal.classList.add('active');
			document.body.style.overflow = 'hidden';
			consultationForm.style.display = 'block';
			consultationSuccess.style.display = 'none';
			consultationForm.reset();
		};

		contactBtns.forEach(btn => {
			btn.addEventListener('click', (e) => {
				e.preventDefault();
				openModal('Contact Us');
			});
		});

		const closeModal = () => {
			consultationModal.classList.remove('active');
			document.body.style.overflow = '';
			consultationForm.style.display = 'block';
			consultationSuccess.style.display = 'none';
			consultationForm.reset();
		};

		if (modalClose) {
			modalClose.addEventListener('click', closeModal);
		}

		if (modalCancel) {
			modalCancel.addEventListener('click', closeModal);
		}

		consultationModal.addEventListener('click', (e) => {
			if (e.target === consultationModal) {
				closeModal();
			}
		});

		consultationForm.addEventListener('submit', async (e) => {
			e.preventDefault();

			const formData = {
				name: document.getElementById('name').value,
				email: document.getElementById('email').value,
				phone: document.getElementById('phone').value,
				country: document.getElementById('country').value,
				employees: document.getElementById('employees').value
			};

			const submitBtn = consultationForm.querySelector('button[type="submit"]');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Submitting...';

			try {
				const response = await fetch('/api/consultation', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					consultationForm.style.display = 'none';
					consultationSuccess.style.display = 'block';
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					alert(errorMsg);
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				alert('Network error: ' + error.message + '. Please check if the server is running.');
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});

		// Download Modal
		const downloadModal = document.getElementById('download-modal');
		const downloadForm = document.getElementById('download-form');
		const downloadSuccess = document.getElementById('download-success');
		const downloadModalClose = document.querySelector('.download-modal-close');
		const downloadModalCancel = document.querySelector('.download-modal-cancel');
		const downloadResourceInput = document.getElementById('download-resource');
		const downloadTriggers = document.querySelectorAll('.download-trigger');

		const resourceToUrl = {
			'service-overview': 'downloads/emiliateams-service-overview.pdf',
			'eor-vs-peo-guide': 'downloads/eor-vs-peo-guide.pdf',
			'china-team-guide': 'downloads/building-your-china-team-guide.pdf'
		};

		const openDownloadModal = (resource) => {
			downloadResourceInput.value = resource;
			downloadModal.classList.add('active');
			document.body.style.overflow = 'hidden';
			downloadForm.style.display = 'block';
			downloadSuccess.hidden = true;
			downloadSuccess.style.display = 'none';
			document.getElementById('download-error-message').style.display = 'none';
			downloadForm.reset();
			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
			// Reset submit button state
			const submitBtn = document.getElementById('download-submit-btn');
			submitBtn.disabled = false;
			submitBtn.textContent = 'Send me the PDF';
			setTimeout(() => {
				document.getElementById('download-name').focus();
			}, 100);
		};

		const closeDownloadModal = () => {
			downloadModal.classList.remove('active');
			document.body.style.overflow = '';
			downloadForm.style.display = 'block';
			downloadSuccess.hidden = true;
			downloadSuccess.style.display = 'none';
			document.getElementById('download-error-message').style.display = 'none';
			downloadForm.reset();
			// Reset submit button state
			const submitBtn = document.getElementById('download-submit-btn');
			submitBtn.disabled = false;
			submitBtn.textContent = 'Send me the PDF';
			// Clear error messages
			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
		};

		downloadTriggers.forEach(trigger => {
			trigger.addEventListener('click', (e) => {
				e.preventDefault();
				const resource = trigger.getAttribute('data-resource');
				if (resource) {
					openDownloadModal(resource);
				}
			});
		});

		if (downloadModalClose) {
			downloadModalClose.addEventListener('click', closeDownloadModal);
		}

		if (downloadModalCancel) {
			downloadModalCancel.addEventListener('click', closeDownloadModal);
		}

		downloadModal.addEventListener('click', (e) => {
			if (e.target === downloadModal) {
				closeDownloadModal();
			}
		});

		downloadForm.addEventListener('submit', async (e) => {
			e.preventDefault();

			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
			document.getElementById('download-error-message').style.display = 'none';

			const name = document.getElementById('download-name').value.trim();
			const email = document.getElementById('download-email').value.trim();
			let isValid = true;

			if (!name) {
				document.getElementById('download-name-error').textContent = 'Name is required';
				isValid = false;
			}

			if (!email) {
				document.getElementById('download-email-error').textContent = 'Email is required';
				isValid = false;
			} else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
				document.getElementById('download-email-error').textContent = 'Please enter a valid email address';
				isValid = false;
			}

			if (!isValid) {
				return;
			}

			const resource = downloadResourceInput.value;
			const formData = {
				name: name,
				email: email,
				resource: resource
			};

			const submitBtn = document.getElementById('download-submit-btn');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Sending...';

			try {
				const response = await fetch('/api/send-download', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					downloadForm.style.display = 'none';
					downloadSuccess.hidden = false;
					downloadSuccess.style.display = 'block';
					document.getElementById('download-success-email').textContent = email;
					const pdfUrl = resourceToUrl[resource] || '';
					if (pdfUrl) {
						document.getElementById('download-direct-link').href = pdfUrl;
					}
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					document.getElementById('download-error-message').style.display = 'block';
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				document.getElementById('download-error-message').style.display = 'block';
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});
	</script>
</body>
</html>

