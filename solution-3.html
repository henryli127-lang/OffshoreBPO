<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>China EOR & PEO | Employer of Record in China | Hire in China Without Entity</title>
	<meta name="description" content="China EOR and PEO services for companies without a local entity. Hire compliantly in China through Employer of Record or Professional Employer Organization. China HR outsourcing and BPO teams.">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<!-- Navigation -->
	<nav class="navbar">
		<div class="nav-container">
			<div class="logo"><a href="index.html"><img src="company-logo.png" alt="Company Logo" /></a></div>
			<button class="menu-toggle" aria-label="Toggle menu">
				<span></span>
				<span></span>
				<span></span>
			</button>
			<div class="menu-overlay"></div>
			<ul class="nav-links">
				<li><a href="index.html">Home</a></li>
				<li class="dropdown">
					<a href="#solutions" class="dropdown-toggle">Solutions <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 4.5l3 3 3-3"/></svg></a>
					<ul class="dropdown-menu">
						<li><a href="solution-1.html">BPO & EOR for tech and professional services</a></li>
						<li><a href="solution-2.html">Sales and service team‑as‑a‑service for export manufacturers and hardware companies</a></li>
						<li><a href="solution-3.html">EOR & HR outsourcing for companies and organizations without a China entity</a></li>
					</ul>
				</li>
				<li><a href="why-us.html">Why Us</a></li>
				<li><a href="resources.html">Resources</a></li>
				<li><a href="#" class="btn-nav" id="contact-btn-nav">Contact</a></li>
			</ul>
		</div>
	</nav>

	<!-- Hero Section -->
	<section class="solution-hero" aria-labelledby="hero-heading">
		<div class="container">
			<div class="solution-hero-content">
				<p class="section-tag">CHINA EOR & PEO · EMPLOYER OF RECORD</p>
				<h1 id="hero-heading">China EOR & PEO: compliant employment without a local entity</h1>
				<p class="solution-hero-subtitle">Tap into China's high‑quality, cost‑competitive talent pool through a trusted employer of record, while you stay focused on your core business.</p>
				<p class="hero-context">EOR and PEO are both viable ways for foreign companies to hire in China without building a large in‑house HR team, but they solve different problems and fit different stages of your China strategy.</p>
				<ul class="hero-bullets">
					<li>
						<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Hire in China without setting up a Wholly Foreign‑Owned Enterprise (WFOE) or joint venture.</span>
					</li>
					<li>
						<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>We handle contracts, payroll, social insurance, housing fund, and individual income tax in line with local rules.</span>
					</li>
					<li>
						<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Move from small pilot teams to larger operations with a clear path from EOR to your own entity.</span>
					</li>
				</ul>
				<div class="hero-cta">
					<a href="consultation.html" class="btn btn-primary">Book a free consultation</a>
					<a href="#" class="btn btn-outline download-trigger" data-resource="eor-vs-peo-guide">Download EOR vs. PEO guide</a>
				</div>
			</div>
		</div>
	</section>

	<!-- Why China and Why Structure Matters -->
	<section class="section" aria-labelledby="why-china-heading">
		<div class="container">
			<div class="solution-content">
				<h2 id="why-china-heading">Why China – and why legal structure matters</h2>
				<p>China's BPO and HR outsourcing market has shifted from low‑cost, transactional work to higher‑value, knowledge‑intensive services in technology, finance, e‑commerce, and advanced manufacturing. The market was valued at around USD 19.7 billion in 2024 and is projected to grow at roughly 12 percent annually through 2030, with HR outsourcing among the fastest‑growing segments.</p>
				<p>At the same time, China's employment environment is uniquely complex. Labour contracts, social insurance and housing fund, and individual income tax must all align across the same jurisdiction, with tightening enforcement in major cities such as Beijing, Shanghai, Shenzhen, and Guangzhou. For foreign companies unfamiliar with Chinese policy and practice, "experimenting" with in‑house hiring or loosely structured contractors can easily create compliance risk, especially with small initial headcount.</p>
				<p class="positioning-sentence">Choosing the right structure – EOR or PEO – is therefore not just administrative; it is a core risk management decision.</p>
			</div>
		</div>
	</section>

	<!-- Conceptual Foundations: What EOR and PEO Really Mean -->
	<section class="section section-alt" aria-labelledby="foundations-heading">
		<div class="container">
			<h2 id="foundations-heading">What EOR and PEO really mean in China</h2>
			<div class="eor-peo-foundations">
				<div class="foundation-block">
					<h3>EOR: a turnkey legal employer</h3>
					<p>An Employer of Record (EOR) in China becomes the legal employer of your staff on the ground, while you retain day‑to‑day control of work, performance, and strategy. The EOR signs compliant Chinese labour contracts, registers and pays social insurance and housing fund in the correct city, withholds and files individual income tax, and administers payroll, benefits, and terminations in line with local law.</p>
					<p>Practically, the EOR sits in front of local regulators and labour bureaus, absorbing legal and administrative responsibilities that would otherwise require your own Chinese entity, HR team, and legal counsel. For companies testing China, an EOR lets you hire in weeks instead of months, without the capital and complexity of a WFOE.</p>
				</div>
				<div class="foundation-block">
					<h3>PEO: co‑employment layered on your entity</h3>
					<p>A Professional Employer Organization (PEO) in China operates under a co‑employment model. Your Chinese entity remains the legal employer of record; the PEO shares HR responsibilities such as payroll processing, benefits administration, social insurance registration, and compliance support, while you retain full control over employment decisions and legal obligations.</p>
					<p>PEO is designed for companies that have already set up a local entity and plan a more substantial, long‑term presence. It optimises and professionalises an HR function that already exists; it does not remove the need for an entity or fully shield you from regulatory mistakes.</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Strategic Comparison: EOR vs. PEO -->
	<section class="section" aria-labelledby="comparison-heading">
		<div class="container">
			<h2 id="comparison-heading">EOR vs. PEO in China: which model fits your stage?</h2>
			<div class="comparison-table-wrapper">
				<table class="eor-peo-comparison">
					<thead>
						<tr>
							<th>Dimension</th>
							<th>EOR</th>
							<th>PEO</th>
						</tr>
					</thead>
					<tbody>
						<tr>
							<td><strong>Legal employer</strong></td>
							<td>EOR provider is the legal employer of staff.</td>
							<td>Your Chinese entity is the legal employer.</td>
						</tr>
						<tr>
							<td><strong>Need for local entity</strong></td>
							<td>Not required; you can hire without any Chinese company.</td>
							<td>Required; PEO works only once a local entity exists.</td>
						</tr>
						<tr>
							<td><strong>Compliance responsibility</strong></td>
							<td>EOR bears day‑to‑day compliance and HR legal obligations.</td>
							<td>Compliance is shared; legal liability largely remains with you.</td>
						</tr>
						<tr>
							<td><strong>Speed to hire</strong></td>
							<td>Often 2–4 weeks to onboard once terms are agreed.</td>
							<td>Dependent on entity setup and internal approvals.</td>
						</tr>
						<tr>
							<td><strong>Typical use cases</strong></td>
							<td>Market entry, pilot teams, distributed small teams, risk‑sensitive projects.</td>
							<td>Growth phase, larger stable teams, companies committed to long‑term presence.</td>
						</tr>
					</tbody>
				</table>
			</div>
			<div class="comparison-summary">
				<ul class="checklist">
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>EOR centralises legal risk and HR complexity in the provider's hands, giving you a single accountable counterpart.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>PEO leaves more responsibility and control with your local entity, which can be attractive once you already understand China and plan a long‑term presence.</span>
					</li>
				</ul>
			</div>
		</div>
	</section>

	<!-- Compliance and Risk Control -->
	<section class="section section-alt" aria-labelledby="compliance-heading">
		<div class="container">
			<div class="solution-content">
				<h2 id="compliance-heading">Compliance and risk control in China</h2>
				<p>China's labour and payroll compliance regime rests on three pillars: labour contracts, social security and housing fund, and individual income tax. Authorities increasingly expect these to align consistently in the same jurisdiction.</p>
				<ul class="compliance-list">
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Labour contracts must be in Chinese, specify clear terms, and comply with both national Labour Contract Law and local implementation rules.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Social insurance and housing fund contributions must be paid to the appropriate local schemes; contribution bases and rates vary by city and change over time.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Employers must withhold individual income tax (IIT) monthly and perform annual reconciliation; foreign and local employees may be subject to different residency and tax rules.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Using independent contractors or paying individuals offshore to perform work physically in China is increasingly risky; such arrangements can be re‑characterised as disguised employment, triggering liabilities for unpaid social insurance, back taxes, and penalties.</span>
					</li>
				</ul>
				<p>An EOR solution is engineered to sit squarely within this framework: the EOR is responsible for keeping contracts, registrations, and filings aligned with local rules in each city where employees are located. A PEO depends on your entity having set up correct registrations; it then executes HR operations in support of your compliance but does not fully shield you from regulatory mistakes.</p>
			</div>
		</div>
	</section>

	<!-- Is This For You: Typical Client Scenarios -->
	<section class="section" aria-labelledby="scenarios-heading">
		<div class="container">
			<h2 id="scenarios-heading">Is China EOR / PEO right for you?</h2>
			<div class="scenarios-grid">
				<div class="scenario-card">
					<div class="scenario-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<rect x="10" y="8" width="28" height="32" rx="2"/>
							<circle cx="24" cy="20" r="4"/>
							<path d="M16 32c0-4 3.5-8 8-8s8 4 8 8"/>
						</svg>
					</div>
					<h3>BPO teams without entity</h3>
					<p>You want to hire 3–30+ engineers, support, or operations staff in China to deliver BPO work, but you are not ready to set up a local entity.</p>
				</div>
				<div class="scenario-card">
					<div class="scenario-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<rect x="6" y="20" width="16" height="20" rx="1"/>
							<circle cx="36" cy="28" r="8"/>
							<path d="M22 30l6-2"/>
						</svg>
					</div>
					<h3>Market testing</h3>
					<p>You are an industrial or hardware manufacturer testing the China market and need your first sales and service representatives on the ground.</p>
				</div>
				<div class="scenario-card">
					<div class="scenario-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
							<path d="M9 12l2 2 4-4"/>
							<rect x="20" y="10" width="20" height="28" rx="2"/>
						</svg>
					</div>
					<h3>Regularizing contractors</h3>
					<p>You currently work with contractors in China and want to regularise them into compliant employment.</p>
				</div>
				<div class="scenario-card">
					<div class="scenario-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<rect x="8" y="12" width="32" height="24" rx="2"/>
							<path d="M16 36h16M24 36v6"/>
							<circle cx="24" cy="24" r="4"/>
						</svg>
					</div>
					<h3>Existing entity, outsourced HR</h3>
					<p>You already have a China entity and want to outsource payroll, benefits, and HR compliance to a specialised partner.</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Why EmiliaTeams for China EOR / PEO -->
	<section class="section section-alt" aria-labelledby="why-us-heading">
		<div class="container">
			<h2 id="why-us-heading">Why work with EmiliaTeams as your China EOR partner</h2>
			<div class="differentiators-grid">
				<div class="differentiator-card">
					<div class="differentiator-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
							<path d="M9 12l2 2 4-4"/>
							<rect x="20" y="10" width="20" height="28" rx="2"/>
							<path d="M26 18h8M26 24h6M26 30h8"/>
						</svg>
					</div>
					<h3>Deep China HR and compliance expertise</h3>
					<p>20+ years of experience in Chinese HR services and employment law, across major cities and regions. We focus on preventive compliance with correct contracts, documentation, and processes.</p>
				</div>
				<div class="differentiator-card">
					<div class="differentiator-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<circle cx="24" cy="24" r="16"/>
							<ellipse cx="24" cy="24" rx="16" ry="6"/>
							<ellipse cx="24" cy="24" rx="6" ry="16"/>
							<circle cx="24" cy="24" r="3" fill="currentColor"/>
							<circle cx="36" cy="16" r="5"/>
							<path d="M36 14v4M34 16h4"/>
						</svg>
					</div>
					<h3>International mindset and communication</h3>
					<p>Team members with work experience in China, the US, Canada, and other markets. We understand how global companies plan, report, and make decisions, and we bridge HQ and local teams in clear, business‑oriented English and native Chinese.</p>
				</div>
				<div class="differentiator-card">
					<div class="differentiator-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<rect x="20" y="20" width="160" height="100" rx="8"/>
							<rect x="30" y="35" width="80" height="8" rx="2"/>
							<rect x="30" y="50" width="60" height="6" rx="2"/>
							<rect x="30" y="62" width="70" height="6" rx="2"/>
							<circle cx="145" cy="60" r="15"/>
							<path d="M140 60l4 4 8-8"/>
						</svg>
					</div>
					<h3>Tech‑driven, execution‑focused delivery</h3>
					<p>Background in global tech organisations and BPO operations. We are comfortable with agile methods, distributed teams, and data‑driven management, supported by modern tools for HR operations and performance reporting.</p>
				</div>
				<div class="differentiator-card">
					<div class="differentiator-icon">
						<svg viewBox="0 0 48 48" fill="none" stroke="currentColor" stroke-width="1.5" aria-hidden="true">
							<path d="M24 4L6 14v20l18 10 18-10V14L24 4z"/>
							<path d="M24 24v20M6 14l18 10 18-10"/>
							<circle cx="24" cy="18" r="4"/>
						</svg>
					</div>
					<h3>Designed for companies without a China entity</h3>
					<p>We specialise in helping companies hire and manage staff in China through EOR/PEO and BPO models before they establish a local subsidiary, with a clear transition path when you are ready.</p>
				</div>
			</div>
		</div>
	</section>

	<!-- Final CTA & Resources -->
	<section class="section cta-section" aria-labelledby="final-cta-heading">
		<div class="container">
			<div class="cta-wrapper">
				<div class="cta-content">
					<h2 id="final-cta-heading">Ready to explore China EOR / PEO for your company?</h2>
					<p>Share your plans, and we'll show you what a compliant China employment solution could look like for your business, including timelines, costs, and total cost of ownership.</p>
					<div class="cta-buttons">
						<a href="consultation.html" class="btn btn-primary">Book a free consultation</a>
						<a href="#" class="btn btn-ghost download-trigger" data-resource="eor-vs-peo-guide">Download EOR vs. PEO guide</a>
					</div>
					<div class="related-resources">
						<p class="resources-label">Related resources:</p>
						<ul class="resources-links">
							<li><a href="resources.html#eor-vs-peo-guide">Navigating China's Talent Market: A Strategic Guide to EOR vs. PEO</a></li>
							<li><a href="resources.html#china-team-guide">Building Your China Team: A Strategic Guide for SMEs</a></li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer -->
	<footer class="footer">
		<div class="container">
			<div class="footer-grid">
				<div class="footer-brand">
					<div class="footer-logo"><img src="company-logo.png" alt="Company Logo" /></div>
					<p>Building your China team with expertise, compliance, and care.</p>
				</div>
				<div class="footer-links">
					<h4>Solutions</h4>
					<a href="solution-1.html">BPO Services</a>
					<a href="solution-3.html">EOR / PEO</a>
					<a href="solution-2.html">Sales Execution</a>
				</div>
				<div class="footer-links">
					<h4>Company</h4>
					<a href="why-us.html">Why Us</a>
					<a href="resources.html">Resources</a>
					<a href="consultation.html">Book a Consultation</a>
				</div>
				<div class="footer-links">
					<h4>Get Started</h4>
					<a href="consultation.html">Book a Call</a>
					<a href="#" class="download-trigger" data-resource="service-overview">Download Overview</a>
				</div>
			</div>
			<div class="footer-bottom">
				<p>© 2024 Company Logo. All rights reserved.</p>
			</div>
		</div>
	</footer>

	<!-- Download Modal -->
	<div id="download-modal" class="modal">
		<div class="modal-content">
			<span class="modal-close download-modal-close">&times;</span>
			<h2 class="modal-title" id="download-modal-title">Get the PDF by email</h2>
			<p class="modal-subtitle">
				Enter your name and email, and we'll send the PDF straight to your inbox (and give you a direct download link on this page).
			</p>
			<form id="download-form">
				<input type="hidden" id="download-resource" name="resource" value="">
				<div class="form-group">
					<label for="download-name">Name *</label>
					<input type="text" id="download-name" name="name" required>
					<span class="form-error" id="download-name-error"></span>
				</div>
				<div class="form-group">
					<label for="download-email">Email *</label>
					<input type="email" id="download-email" name="email" required>
					<span class="form-error" id="download-email-error"></span>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary" id="download-submit-btn">Send me the PDF</button>
					<button type="button" class="btn btn-outline download-modal-cancel">Cancel</button>
				</div>
				<div id="download-error-message" class="download-error-message" style="display: none;">
					<p>Something went wrong. Please try again or email us at info@emiliateams.com.</p>
				</div>
			</form>
			<div id="download-success" class="download-success" hidden>
				<div class="success-icon">✓</div>
				<h3>Check your email</h3>
				<p class="success-message">
					We've sent the PDF to <span id="download-success-email"></span>.
					You can also download it directly below.
				</p>
				<a id="download-direct-link" href="#" class="btn btn-primary" download>
					Download now
				</a>
			</div>
		</div>
	</div>

	<!-- Contact Modal -->
	<div id="consultation-modal" class="modal">
		<div class="modal-content">
			<span class="modal-close">&times;</span>
			<h2 id="modal-title">Contact Us</h2>
			<form id="consultation-form">
				<div class="form-group">
					<label for="name">Name *</label>
					<input type="text" id="name" name="name" required>
				</div>
				<div class="form-group">
					<label for="email">Work Email *</label>
					<input type="email" id="email" name="email" required>
				</div>
				<div class="form-group">
					<label for="phone">Phone Number *</label>
					<input type="tel" id="phone" name="phone" required>
				</div>
				<div class="form-group">
					<label for="country">Which country are you located in? *</label>
					<select id="country" name="country" required>
						<option value="">Please select</option>
						<option value="US">United States</option>
						<option value="CA">Canada</option>
						<option value="GB">United Kingdom</option>
						<option value="AU">Australia</option>
						<option value="DE">Germany</option>
						<option value="FR">France</option>
						<option value="IT">Italy</option>
						<option value="ES">Spain</option>
						<option value="NL">Netherlands</option>
						<option value="BE">Belgium</option>
						<option value="CH">Switzerland</option>
						<option value="AT">Austria</option>
						<option value="SE">Sweden</option>
						<option value="NO">Norway</option>
						<option value="DK">Denmark</option>
						<option value="FI">Finland</option>
						<option value="IE">Ireland</option>
						<option value="NZ">New Zealand</option>
						<option value="SG">Singapore</option>
						<option value="HK">Hong Kong</option>
						<option value="JP">Japan</option>
						<option value="KR">South Korea</option>
						<option value="Other">Other</option>
					</select>
				</div>
				<div class="form-group">
					<label for="employees">How many employees are you planning to hire? *</label>
					<select id="employees" name="employees" required>
						<option value="">Please select</option>
						<option value="1-5">1-5 employees</option>
						<option value="6-10">6-10 employees</option>
						<option value="11-20">11-20 employees</option>
						<option value="21-50">21-50 employees</option>
						<option value="51-100">51-100 employees</option>
						<option value="100+">100+ employees</option>
					</select>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary" id="form-submit-btn">Submit</button>
					<button type="button" class="btn btn-outline modal-cancel">Cancel</button>
				</div>
			</form>
			<div id="consultation-success" class="consultation-success" style="display: none;">
				<div class="success-icon">✓</div>
				<h3>Thank you!</h3>
				<p>Someone from our team will contact you within 24 hours.</p>
			</div>
		</div>
	</div>

	<script>
		// Mobile dropdown toggle - must be before smooth scroll to have priority
		const dropdownToggle = document.querySelector('.dropdown-toggle');
		const dropdown = document.querySelector('.dropdown');
		
		if (dropdownToggle && dropdown) {
			// Use capture phase to ensure this runs first
			dropdownToggle.addEventListener('click', (e) => {
				if (window.innerWidth <= 768) {
					e.preventDefault();
					e.stopPropagation();
					e.stopImmediatePropagation();
					dropdown.classList.toggle('active');
					return false;
				}
			}, true); // true = capture phase
		}
		
		// Smooth scroll (only for anchor links that are not modal buttons, download triggers, or dropdown toggles)
		document.querySelectorAll('a[href^="#"]:not(#contact-btn-nav):not(#contact-btn-cta):not(.download-trigger):not(.dropdown-toggle)').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				const href = this.getAttribute('href');
				if (href && href.startsWith('#') && href.length > 1) {
					e.preventDefault();
					try {
						const target = document.querySelector(href);
						if (target) {
							target.scrollIntoView({ behavior: 'smooth', block: 'start' });
						}
					} catch (error) {
						console.log('Invalid anchor selector:', href);
					}
				}
			});
		});

		// Navbar scroll effect
		const navbar = document.querySelector('.navbar');
		window.addEventListener('scroll', () => {
			if (window.scrollY > 50) {
				navbar.classList.add('scrolled');
			} else {
				navbar.classList.remove('scrolled');
			}
		});

		// Mobile menu toggle
		const menuToggle = document.querySelector('.menu-toggle');
		const navLinks = document.querySelector('.nav-links');
		const menuOverlay = document.querySelector('.menu-overlay');
		
		if (menuToggle && menuOverlay) {
			const toggleMenu = () => {
				const isActive = menuToggle.classList.contains('active');
				menuToggle.classList.toggle('active');
				navLinks.classList.toggle('active');
				menuOverlay.classList.toggle('active');
			};
			
			menuToggle.addEventListener('click', toggleMenu);
			
			menuOverlay.addEventListener('click', toggleMenu);
			
			// Close menu when clicking on a link (but not dropdown toggle)
			navLinks.querySelectorAll('a:not(.dropdown-toggle)').forEach(link => {
				link.addEventListener('click', (e) => {
					// Only close menu, don't prevent default for normal links
					menuToggle.classList.remove('active');
					navLinks.classList.remove('active');
					menuOverlay.classList.remove('active');
					document.body.style.overflow = '';
				});
			});
		}

		// Intersection Observer for animations
		const observer = new IntersectionObserver((entries) => {
			entries.forEach(entry => {
				if (entry.isIntersecting) {
					entry.target.classList.add('visible');
				}
			});
		}, { threshold: 0.1, rootMargin: '0px 0px -50px 0px' });

		document.querySelectorAll('.scenario-card, .differentiator-card, .foundation-block').forEach(el => {
			observer.observe(el);
		});

		// Contact Modal
		const consultationModal = document.getElementById('consultation-modal');
		const consultationForm = document.getElementById('consultation-form');
		const consultationSuccess = document.getElementById('consultation-success');
		const modalTitle = document.getElementById('modal-title');
		const modalClose = document.querySelector('.modal-close');
		const modalCancel = document.querySelector('.modal-cancel');
		const contactBtn = document.getElementById('contact-btn-nav');

		// Open modal function
		const openModal = (title) => {
			modalTitle.textContent = title;
			consultationModal.classList.add('active');
			document.body.style.overflow = 'hidden';
			consultationForm.style.display = 'block';
			consultationSuccess.style.display = 'none';
			consultationForm.reset();
		};

		// Open modal for contact button
		if (contactBtn) {
			contactBtn.addEventListener('click', (e) => {
				e.preventDefault();
				openModal('Contact Us');
			});
		}

		// Close modal
		const closeModal = () => {
			consultationModal.classList.remove('active');
			document.body.style.overflow = '';
			consultationForm.style.display = 'block';
			consultationSuccess.style.display = 'none';
			consultationForm.reset();
		};

		if (modalClose) {
			modalClose.addEventListener('click', closeModal);
		}

		if (modalCancel) {
			modalCancel.addEventListener('click', closeModal);
		}

		// Close modal when clicking outside
		consultationModal.addEventListener('click', (e) => {
			if (e.target === consultationModal) {
				closeModal();
			}
		});

		// Form submission
		consultationForm.addEventListener('submit', async (e) => {
			e.preventDefault();

			const formData = {
				name: document.getElementById('name').value,
				email: document.getElementById('email').value,
				phone: document.getElementById('phone').value,
				country: document.getElementById('country').value,
				employees: document.getElementById('employees').value
			};

			const submitBtn = consultationForm.querySelector('button[type="submit"]');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Submitting...';

			try {
				const response = await fetch('/api/consultation', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					consultationForm.style.display = 'none';
					consultationSuccess.style.display = 'block';
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					alert(errorMsg);
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				alert('Network error: ' + error.message + '. Please check if the server is running.');
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});

		// Download Modal
		const downloadModal = document.getElementById('download-modal');
		const downloadForm = document.getElementById('download-form');
		const downloadSuccess = document.getElementById('download-success');
		const downloadModalClose = document.querySelector('.download-modal-close');
		const downloadModalCancel = document.querySelector('.download-modal-cancel');
		const downloadResourceInput = document.getElementById('download-resource');
		const downloadTriggers = document.querySelectorAll('.download-trigger');

		const resourceToUrl = {
			'service-overview': 'downloads/emiliateams-service-overview.pdf',
			'eor-vs-peo-guide': 'downloads/eor-vs-peo-guide.pdf',
			'china-team-guide': 'downloads/building-your-china-team-guide.pdf'
		};

		const openDownloadModal = (resource) => {
			downloadResourceInput.value = resource;
			downloadModal.classList.add('active');
			document.body.style.overflow = 'hidden';
			downloadForm.style.display = 'block';
			downloadSuccess.hidden = true;
			downloadSuccess.style.display = 'none';
			document.getElementById('download-error-message').style.display = 'none';
			downloadForm.reset();
			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
			// Reset submit button state
			const submitBtn = document.getElementById('download-submit-btn');
			submitBtn.disabled = false;
			submitBtn.textContent = 'Send me the PDF';
			setTimeout(() => {
				document.getElementById('download-name').focus();
			}, 100);
		};

		const closeDownloadModal = () => {
			downloadModal.classList.remove('active');
			document.body.style.overflow = '';
			downloadForm.style.display = 'block';
			downloadSuccess.hidden = true;
			downloadSuccess.style.display = 'none';
			document.getElementById('download-error-message').style.display = 'none';
			downloadForm.reset();
			// Reset submit button state
			const submitBtn = document.getElementById('download-submit-btn');
			submitBtn.disabled = false;
			submitBtn.textContent = 'Send me the PDF';
			// Clear error messages
			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
		};

		downloadTriggers.forEach(trigger => {
			trigger.addEventListener('click', (e) => {
				e.preventDefault();
				const resource = trigger.getAttribute('data-resource');
				if (resource) {
					openDownloadModal(resource);
				}
			});
		});

		if (downloadModalClose) {
			downloadModalClose.addEventListener('click', closeDownloadModal);
		}

		if (downloadModalCancel) {
			downloadModalCancel.addEventListener('click', closeDownloadModal);
		}

		downloadModal.addEventListener('click', (e) => {
			if (e.target === downloadModal) {
				closeDownloadModal();
			}
		});

		downloadForm.addEventListener('submit', async (e) => {
			e.preventDefault();

			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
			document.getElementById('download-error-message').style.display = 'none';

			const name = document.getElementById('download-name').value.trim();
			const email = document.getElementById('download-email').value.trim();
			let isValid = true;

			if (!name) {
				document.getElementById('download-name-error').textContent = 'Name is required';
				isValid = false;
			}

			if (!email) {
				document.getElementById('download-email-error').textContent = 'Email is required';
				isValid = false;
			} else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
				document.getElementById('download-email-error').textContent = 'Please enter a valid email address';
				isValid = false;
			}

			if (!isValid) {
				return;
			}

			const resource = downloadResourceInput.value;
			const formData = {
				name: name,
				email: email,
				resource: resource
			};

			const submitBtn = document.getElementById('download-submit-btn');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Sending...';

			try {
				const response = await fetch('/api/send-download', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					downloadForm.style.display = 'none';
					downloadSuccess.hidden = false;
					downloadSuccess.style.display = 'block';
					document.getElementById('download-success-email').textContent = email;
					const pdfUrl = resourceToUrl[resource] || '';
					if (pdfUrl) {
						document.getElementById('download-direct-link').href = pdfUrl;
					}
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					document.getElementById('download-error-message').style.display = 'block';
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				document.getElementById('download-error-message').style.display = 'block';
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});
	</script>
</body>
</html>
