<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Book a Free Consultation | EmiliaTeams – China EOR, PEO & BPO Partner</title>
	<meta name="description" content="Free consultation for global companies exploring China EOR, PEO, BPO, and team-as-a-service. No obligation. Discuss your plans for hiring in China without setting up a local entity.">
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=Orbitron:wght@700&display=swap" rel="stylesheet">
	<link rel="stylesheet" href="styles.css">
</head>
<body>
	<!-- Navigation -->
	<nav class="navbar">
		<div class="nav-container">
			<div class="logo"><a href="index.html"><img src="company-logo.png" alt="Company Logo" /></a></div>
			<button class="menu-toggle" aria-label="Toggle menu">
				<span></span>
				<span></span>
				<span></span>
			</button>
			<div class="menu-overlay"></div>
			<ul class="nav-links">
				<li><a href="index.html">Home</a></li>
				<li class="dropdown">
					<a href="#solutions" class="dropdown-toggle">Solutions <svg class="dropdown-arrow" width="12" height="12" viewBox="0 0 12 12" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 4.5l3 3 3-3"/></svg></a>
					<ul class="dropdown-menu">
						<li><a href="solution-1.html">BPO & EOR for tech and professional services</a></li>
						<li><a href="solution-2.html">Sales and service team‑as‑a‑service for export manufacturers and hardware companies</a></li>
						<li><a href="solution-3.html">EOR & HR outsourcing for companies and organizations without a China entity</a></li>
					</ul>
				</li>
				<li><a href="why-us.html">Why Us</a></li>
				<li><a href="resources.html">Resources</a></li>
				<li><a href="#" class="btn-nav" id="contact-btn-nav">Contact</a></li>
			</ul>
		</div>
	</nav>

	<!-- Hero Section -->
	<section class="hero hero-consultation" aria-labelledby="hero-heading">
		<div class="container">
			<div class="hero-consultation-content">
				<p class="section-tag">CONSULTATION · CHINA EOR & BPO</p>
				<h1 id="hero-heading">Book a free consultation</h1>
				<p class="hero-subtitle">
					Discuss your plans for China with a partner who understands both local HR compliance and how global companies operate.
				</p>
				<ul class="hero-bullets">
					<li>
						<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Clarify whether EOR, PEO, BPO, or contractors are right for your situation.</span>
					</li>
					<li>
						<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Understand timelines, costs, and key risks of hiring in China without an entity.</span>
					</li>
					<li>
						<svg class="bullet-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Get a concrete next‑step plan for your first or next team members in China.</span>
					</li>
				</ul>
			</div>
		</div>
	</section>

	<!-- What We'll Cover Section -->
	<section class="section" aria-labelledby="what-well-cover-heading">
		<div class="container consultation-intro">
			<div class="consultation-intro-text">
				<h2 id="what-well-cover-heading">What we'll cover in 30–45 minutes</h2>
				<ul class="checklist">
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Your plans, markets, and timelines for China.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Whether BPO, EOR/PEO, or a hybrid model fits your needs.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Rough team structure, hiring priorities, and budget ranges.</span>
					</li>
					<li>
						<svg class="check-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
							<polyline points="20 6 9 17 4 12"></polyline>
						</svg>
						<span>Key compliance considerations you should be aware of.</span>
					</li>
				</ul>
				<p class="small-note">
					This is not a generic sales pitch. It's a working session to help you decide if and how to build a team in China.
				</p>
			</div>
		</div>
	</section>

	<!-- Consultation Form Section -->
	<section class="section section-alt consultation-form-section" aria-labelledby="form-heading">
		<div class="container">
			<div class="consultation-form-wrapper">
				<div class="consultation-form-header">
					<h2 id="form-heading">Tell us a bit about your company</h2>
					<p>So we can prepare relevant examples and recommendations for your situation.</p>
				</div>
				<form id="consultation-form-main" class="consultation-form">
					<div class="form-grid">
						<div class="form-group">
							<label for="cf-name">Name *</label>
							<input type="text" id="cf-name" name="name" required>
						</div>
						<div class="form-group">
							<label for="cf-email">Work Email *</label>
							<input type="email" id="cf-email" name="email" required>
						</div>
						<div class="form-group">
							<label for="cf-company">Company *</label>
							<input type="text" id="cf-company" name="company" required>
						</div>
						<div class="form-group">
							<label for="cf-country">Where is your company based? *</label>
							<input type="text" id="cf-country" name="country" required>
						</div>
						<div class="form-group">
							<label for="cf-employees">How many people are you planning to hire in China? *</label>
							<select id="cf-employees" name="employees" required>
								<option value="">Please select</option>
								<option value="1-5">1–5 employees</option>
								<option value="6-10">6–10 employees</option>
								<option value="11-20">11–20 employees</option>
								<option value="21-50">21–50 employees</option>
								<option value="51-100">51–100 employees</option>
								<option value="100+">100+ employees</option>
							</select>
						</div>
						<div class="form-group form-group-full">
							<label for="cf-notes">What are you hoping to achieve in China? (optional)</label>
							<textarea id="cf-notes" name="notes" rows="3" placeholder="e.g. Set up a support team, hire first sales rep, regularize existing contractors…"></textarea>
						</div>
					</div>
					<div class="form-actions">
						<button type="submit" class="btn btn-primary">Submit request</button>
						<p class="form-footnote">We'll get back to you within 1 business day.</p>
					</div>
					<div id="consultation-form-success" class="consultation-success" aria-live="polite" hidden>
						<div class="success-icon">✓</div>
						<h3>Thank you!</h3>
						<p>Someone from our team will contact you within 24 hours to schedule your consultation.</p>
					</div>
				</form>
			</div>
		</div>
	</section>

	<!-- FAQ Section -->
	<section class="section" aria-labelledby="faq-heading">
		<div class="container">
			<div class="consultation-faq">
				<h2 id="faq-heading">Frequently asked questions</h2>
				<div class="faq-list">
					<div class="faq-item">
						<h3>Is the consultation really free?</h3>
						<p>Yes, absolutely. There's no cost or obligation. We want to help you make an informed decision about whether and how to build a team in China.</p>
					</div>
					<div class="faq-item">
						<h3>What kind of companies is this best for?</h3>
						<p>We work best with global tech companies, professional services firms, export manufacturers, and organizations that need to hire in China but don't have (or don't want to set up) a local entity.</p>
					</div>
					<div class="faq-item">
						<h3>Do I need to have a China entity already?</h3>
						<p>No. In fact, most of our clients don't have a China entity. That's exactly why they work with us—we handle the employment and compliance so they can focus on building their team.</p>
					</div>
				</div>
			</div>
		</div>
	</section>

	<!-- Footer -->
	<footer class="footer">
		<div class="container">
			<div class="footer-grid">
				<div class="footer-brand">
					<div class="footer-logo"><img src="company-logo.png" alt="Company Logo" /></div>
					<p>Building your China team with expertise, compliance, and care.</p>
				</div>
				<div class="footer-links">
					<h4>Solutions</h4>
					<a href="solution-1.html">BPO Services</a>
					<a href="solution-3.html">EOR / PEO</a>
					<a href="solution-2.html">Sales Execution</a>
				</div>
				<div class="footer-links">
					<h4>Company</h4>
					<a href="why-us.html">Why Us</a>
					<a href="resources.html">Resources</a>
					<a href="consultation.html">Book a Consultation</a>
				</div>
				<div class="footer-links">
					<h4>Get Started</h4>
					<a href="consultation.html">Book a Call</a>
					<a href="#" class="download-trigger" data-resource="service-overview">Download Overview</a>
				</div>
			</div>
			<div class="footer-bottom">
				<p>© 2025 EmiliaTeam. All rights reserved.</p>
			</div>
		</div>
	</footer>

	<!-- Download Modal -->
	<div id="download-modal" class="modal">
		<div class="modal-content">
			<span class="modal-close download-modal-close">&times;</span>
			<h2 class="modal-title" id="download-modal-title">Get the PDF by email</h2>
			<p class="modal-subtitle">
				Enter your name and email, and we'll send the PDF straight to your inbox (and give you a direct download link on this page).
			</p>
			<form id="download-form">
				<input type="hidden" id="download-resource" name="resource" value="">
				<div class="form-group">
					<label for="download-name">Name *</label>
					<input type="text" id="download-name" name="name" required>
					<span class="form-error" id="download-name-error"></span>
				</div>
				<div class="form-group">
					<label for="download-email">Email *</label>
					<input type="email" id="download-email" name="email" required>
					<span class="form-error" id="download-email-error"></span>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary" id="download-submit-btn">Send me the PDF</button>
					<button type="button" class="btn btn-outline download-modal-cancel">Cancel</button>
				</div>
				<div id="download-error-message" class="download-error-message" style="display: none;">
					<p>Something went wrong. Please try again or email us at info@emiliateams.com.</p>
				</div>
			</form>
			<div id="download-success" class="download-success" hidden>
				<div class="success-icon">✓</div>
				<h3>Check your email</h3>
				<p class="success-message">
					We've sent the PDF to <span id="download-success-email"></span>.
					You can also download it directly below.
				</p>
				<a id="download-direct-link" href="#" class="btn btn-primary" download>
					Download now
				</a>
			</div>
		</div>
	</div>

	<!-- Contact Modal (reused from other pages) -->
	<div id="consultation-modal" class="modal">
		<div class="modal-content">
			<span class="modal-close consultation-modal-close">&times;</span>
			<h2 id="modal-title">Contact Us</h2>
			<form id="consultation-form">
				<div class="form-group">
					<label for="name">Name *</label>
					<input type="text" id="name" name="name" required>
				</div>
				<div class="form-group">
					<label for="email">Work Email *</label>
					<input type="email" id="email" name="email" required>
				</div>
				<div class="form-group">
					<label for="company">Company *</label>
					<input type="text" id="company" name="company" required>
				</div>
				<div class="form-group">
					<label for="country">Which country are you located in? *</label>
					<select id="country" name="country" required>
						<option value="">Please select</option>
						<option value="US">United States</option>
						<option value="CA">Canada</option>
						<option value="GB">United Kingdom</option>
						<option value="AU">Australia</option>
						<option value="DE">Germany</option>
						<option value="FR">France</option>
						<option value="IT">Italy</option>
						<option value="ES">Spain</option>
						<option value="NL">Netherlands</option>
						<option value="BE">Belgium</option>
						<option value="CH">Switzerland</option>
						<option value="AT">Austria</option>
						<option value="SE">Sweden</option>
						<option value="NO">Norway</option>
						<option value="DK">Denmark</option>
						<option value="FI">Finland</option>
						<option value="IE">Ireland</option>
						<option value="NZ">New Zealand</option>
						<option value="SG">Singapore</option>
						<option value="HK">Hong Kong</option>
						<option value="JP">Japan</option>
						<option value="KR">South Korea</option>
						<option value="Other">Other</option>
					</select>
				</div>
				<div class="form-group">
					<label for="employees">How many employees are you planning to hire? *</label>
					<select id="employees" name="employees" required>
						<option value="">Please select</option>
						<option value="1-5">1-5 employees</option>
						<option value="6-10">6-10 employees</option>
						<option value="11-20">11-20 employees</option>
						<option value="21-50">21-50 employees</option>
						<option value="51-100">51-100 employees</option>
						<option value="100+">100+ employees</option>
					</select>
				</div>
				<div class="form-actions">
					<button type="submit" class="btn btn-primary" id="form-submit-btn">Submit</button>
					<button type="button" class="btn btn-outline modal-cancel">Cancel</button>
				</div>
			</form>
			<div id="consultation-success" class="consultation-success" style="display: none;">
				<div class="success-icon">✓</div>
				<h3>Thank you!</h3>
				<p>Someone from our team will contact you within 24 hours.</p>
			</div>
		</div>
	</div>

	<script>
		// Mobile dropdown toggle - must be before smooth scroll to have priority
		const dropdownToggle = document.querySelector('.dropdown-toggle');
		const dropdown = document.querySelector('.dropdown');
		
		if (dropdownToggle && dropdown) {
			// Use capture phase to ensure this runs first
			dropdownToggle.addEventListener('click', (e) => {
				if (window.innerWidth <= 768) {
					e.preventDefault();
					e.stopPropagation();
					e.stopImmediatePropagation();
					dropdown.classList.toggle('active');
					return false;
				}
			}, true); // true = capture phase
		}
		
		// Smooth scroll (only for anchor links that are not modal buttons, download triggers, or dropdown toggles)
		document.querySelectorAll('a[href^="#"]:not(#contact-btn-nav):not(.download-trigger):not(.dropdown-toggle)').forEach(anchor => {
			anchor.addEventListener('click', function (e) {
				const href = this.getAttribute('href');
				if (href && href.startsWith('#') && href.length > 1) {
					e.preventDefault();
					try {
						const target = document.querySelector(href);
						if (target) {
							target.scrollIntoView({ behavior: 'smooth', block: 'start' });
						}
					} catch (error) {
						console.log('Invalid anchor selector:', href);
					}
				}
			});
		});

		// Navbar scroll effect
		const navbar = document.querySelector('.navbar');
		window.addEventListener('scroll', () => {
			if (window.scrollY > 50) {
				navbar.classList.add('scrolled');
			} else {
				navbar.classList.remove('scrolled');
			}
		});

		// Mobile menu toggle
		const menuToggle = document.querySelector('.menu-toggle');
		const navLinks = document.querySelector('.nav-links');
		const menuOverlay = document.querySelector('.menu-overlay');
		
		if (menuToggle && menuOverlay) {
			const toggleMenu = () => {
				const isActive = menuToggle.classList.contains('active');
				menuToggle.classList.toggle('active');
				navLinks.classList.toggle('active');
				menuOverlay.classList.toggle('active');
			};
			
			menuToggle.addEventListener('click', toggleMenu);
			
			menuOverlay.addEventListener('click', toggleMenu);
			
			// Close menu when clicking on a link (but not dropdown toggle)
			navLinks.querySelectorAll('a:not(.dropdown-toggle)').forEach(link => {
				link.addEventListener('click', (e) => {
					// Only close menu, don't prevent default for normal links
					menuToggle.classList.remove('active');
					navLinks.classList.remove('active');
					menuOverlay.classList.remove('active');
					document.body.style.overflow = '';
				});
			});
		}

		// Contact Modal
		const consultationModal = document.getElementById('consultation-modal');
		const consultationForm = document.getElementById('consultation-form');
		const consultationSuccess = document.getElementById('consultation-success');
		const modalTitle = document.getElementById('modal-title');
		const modalClose = document.querySelector('.consultation-modal-close');
		const modalCancel = document.querySelector('.modal-cancel');
		const contactBtn = document.getElementById('contact-btn-nav');

		// Open modal function
		const openModal = (title) => {
			modalTitle.textContent = title;
			consultationModal.classList.add('active');
			document.body.style.overflow = 'hidden';
			consultationForm.style.display = 'block';
			consultationSuccess.style.display = 'none';
			consultationForm.reset();
			// Reset submit button state
			const submitBtn = consultationForm.querySelector('button[type="submit"]');
			if (submitBtn) {
				submitBtn.disabled = false;
				submitBtn.textContent = 'Submit';
			}
		};

		// Open modal for contact button
		if (contactBtn) {
			contactBtn.addEventListener('click', (e) => {
				e.preventDefault();
				openModal('Contact Us');
			});
		}

		// Close modal
		const closeModal = () => {
			consultationModal.classList.remove('active');
			document.body.style.overflow = '';
			consultationForm.style.display = 'block';
			consultationSuccess.style.display = 'none';
			consultationForm.reset();
			// Reset submit button state
			const submitBtn = consultationForm.querySelector('button[type="submit"]');
			if (submitBtn) {
				submitBtn.disabled = false;
				submitBtn.textContent = 'Submit';
			}
		};

		if (modalClose) {
			modalClose.addEventListener('click', closeModal);
		}

		if (modalCancel) {
			modalCancel.addEventListener('click', closeModal);
		}

		// Close modal when clicking outside
		consultationModal.addEventListener('click', (e) => {
			if (e.target === consultationModal) {
				closeModal();
			}
		});

		// Contact form submission (modal)
		consultationForm.addEventListener('submit', async (e) => {
			e.preventDefault();

			const formData = {
				name: document.getElementById('name').value,
				email: document.getElementById('email').value,
				company: document.getElementById('company').value,
				country: document.getElementById('country').value,
				employees: document.getElementById('employees').value,
				notes: '' // Optional field for contact modal
			};

			const submitBtn = consultationForm.querySelector('button[type="submit"]');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Submitting...';

			try {
				const response = await fetch('/api/consultation', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					consultationForm.style.display = 'none';
					consultationSuccess.style.display = 'block';
					// Reset submit button state for next time
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					alert(errorMsg);
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				alert('Network error: ' + error.message + '. Please check if the server is running.');
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});

		// Main consultation form submission
		const consultationFormMain = document.getElementById('consultation-form-main');
		const consultationFormSuccess = document.getElementById('consultation-form-success');

		consultationFormMain.addEventListener('submit', async (e) => {
			e.preventDefault();

			const formData = {
				name: document.getElementById('cf-name').value,
				email: document.getElementById('cf-email').value,
				company: document.getElementById('cf-company').value,
				country: document.getElementById('cf-country').value,
				employees: document.getElementById('cf-employees').value,
				notes: document.getElementById('cf-notes').value || ''
			};

			// Show loading state
			const submitBtn = consultationFormMain.querySelector('button[type="submit"]');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Submitting...';

			try {
				const response = await fetch('/api/consultation', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					// Hide form and show success
					consultationFormMain.querySelector('.form-grid').style.display = 'none';
					consultationFormMain.querySelector('.form-actions').style.display = 'none';
					consultationFormSuccess.hidden = false;
					consultationFormSuccess.style.display = 'block';
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					alert(errorMsg);
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				alert('Network error: ' + error.message + '. Please check if the server is running.');
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});

		// Download Modal
		const downloadModal = document.getElementById('download-modal');
		const downloadForm = document.getElementById('download-form');
		const downloadSuccess = document.getElementById('download-success');
		const downloadModalClose = document.querySelector('.download-modal-close');
		const downloadModalCancel = document.querySelector('.download-modal-cancel');
		const downloadResourceInput = document.getElementById('download-resource');
		const downloadTriggers = document.querySelectorAll('.download-trigger');

		const resourceToUrl = {
			'service-overview': 'downloads/emiliateams-service-overview.pdf',
			'eor-vs-peo-guide': 'downloads/eor-vs-peo-guide.pdf',
			'china-team-guide': 'downloads/building-your-china-team-guide.pdf'
		};

		const openDownloadModal = (resource) => {
			downloadResourceInput.value = resource;
			downloadModal.classList.add('active');
			document.body.style.overflow = 'hidden';
			downloadForm.style.display = 'block';
			downloadSuccess.hidden = true;
			downloadSuccess.style.display = 'none';
			document.getElementById('download-error-message').style.display = 'none';
			downloadForm.reset();
			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
			// Reset submit button state
			const submitBtn = document.getElementById('download-submit-btn');
			submitBtn.disabled = false;
			submitBtn.textContent = 'Send me the PDF';
			setTimeout(() => {
				document.getElementById('download-name').focus();
			}, 100);
		};

		const closeDownloadModal = () => {
			downloadModal.classList.remove('active');
			document.body.style.overflow = '';
			downloadForm.style.display = 'block';
			downloadSuccess.hidden = true;
			downloadSuccess.style.display = 'none';
			document.getElementById('download-error-message').style.display = 'none';
			downloadForm.reset();
			// Reset submit button state
			const submitBtn = document.getElementById('download-submit-btn');
			submitBtn.disabled = false;
			submitBtn.textContent = 'Send me the PDF';
			// Clear error messages
			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
		};

		downloadTriggers.forEach(trigger => {
			trigger.addEventListener('click', (e) => {
				e.preventDefault();
				const resource = trigger.getAttribute('data-resource');
				if (resource) {
					openDownloadModal(resource);
				}
			});
		});

		if (downloadModalClose) {
			downloadModalClose.addEventListener('click', closeDownloadModal);
		}

		if (downloadModalCancel) {
			downloadModalCancel.addEventListener('click', closeDownloadModal);
		}

		downloadModal.addEventListener('click', (e) => {
			if (e.target === downloadModal) {
				closeDownloadModal();
			}
		});

		downloadForm.addEventListener('submit', async (e) => {
			e.preventDefault();

			document.getElementById('download-name-error').textContent = '';
			document.getElementById('download-email-error').textContent = '';
			document.getElementById('download-error-message').style.display = 'none';

			const name = document.getElementById('download-name').value.trim();
			const email = document.getElementById('download-email').value.trim();
			let isValid = true;

			if (!name) {
				document.getElementById('download-name-error').textContent = 'Name is required';
				isValid = false;
			}

			if (!email) {
				document.getElementById('download-email-error').textContent = 'Email is required';
				isValid = false;
			} else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
				document.getElementById('download-email-error').textContent = 'Please enter a valid email address';
				isValid = false;
			}

			if (!isValid) {
				return;
			}

			const resource = downloadResourceInput.value;
			const formData = {
				name: name,
				email: email,
				resource: resource
			};

			const submitBtn = document.getElementById('download-submit-btn');
			const originalText = submitBtn.textContent;
			submitBtn.disabled = true;
			submitBtn.textContent = 'Sending...';

			try {
				const response = await fetch('/api/send-download', {
					method: 'POST',
					headers: {
						'Content-Type': 'application/json',
					},
					body: JSON.stringify(formData)
				});

				const result = await response.json();

				if (response.ok) {
					downloadForm.style.display = 'none';
					downloadSuccess.hidden = false;
					downloadSuccess.style.display = 'block';
					document.getElementById('download-success-email').textContent = email;
					const pdfUrl = resourceToUrl[resource] || '';
					if (pdfUrl) {
						document.getElementById('download-direct-link').href = pdfUrl;
					}
				} else {
					const errorMsg = result.error || `Server error (${response.status}): ${response.statusText}`;
					console.error('Server error:', errorMsg);
					document.getElementById('download-error-message').style.display = 'block';
					submitBtn.disabled = false;
					submitBtn.textContent = originalText;
				}
			} catch (error) {
				console.error('Error:', error);
				document.getElementById('download-error-message').style.display = 'block';
				submitBtn.disabled = false;
				submitBtn.textContent = originalText;
			}
		});
	</script>
</body>
</html>

